{{define "main"}}

<section class="section pb-0">
  <div class="container text-center">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 mx-auto">
          <h1 class="mb-3">{{ .Title | markdownify }}</h1>
          {{ with .Params.description }}
          <p class="mb-0">{{ . | markdownify }}</p>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="row gx-6 justify-content-center">
      <div class="col-12">
        <div class="pe-0 pe-lg-5">
          <div class="job-content">{{.Content}}</div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-10 col-lg-8 mt-5 mt-lg-0">
        <div
          id="career_form"
          class="sidebar-widget bg-white rounded-2 shadow"
        >
          <form
            action="{{site.Params.career_form_action}}"
            name="career_form"
            method="POST"
            data-netlify="true"
            enctype="multipart/form-data"
            novalidate
          >
            <fieldset class="g-4">
              <legend class="form-legend">{{ i18n "form_legend" }}</legend>
              <input type="hidden" name="job" value="{{.Title}}" />
              <div class="form-group mb-3">
                <label class="mb-1" for="first-name">{{ i18n `fname`}}</label>
                <input 
                  class="form-control shadow-none"
                  type="text" 
                  name="first_name" 
                  id="first-name"
                  required 
                  autocomplete="given-name" 
                  placeholder={{ i18n "fname" }} 
                  aria-errormessage="invalid-feedback-first-name">
                <div class="invalid-feedback" id="invalid-feedback-first-name"> {{ i18n "fname"}} {{ i18n "invalid_required"}} </div>
              </div>
              <div class="form-group mb-3">
                <label class="mb-1" for="last-name">{{ i18n `lname`}}</label>
                <input class="form-control shadow-none" 
                  type="text"
                  name="last_name"
                  id="last-name"
                  required 
                  autocomplete="family-name" 
                  placeholder={{ i18n "lname" }}
                  aria-errormessage="invalid-feedback-last-name">
                <div class="invalid-feedback" id="invalid-feedback-last-name"> 
                  {{ i18n "lname"}} {{ i18n "invalid_required"}} 
                </div>
              </div>

              <div class="form-group mb-3">
                <label class="mb-1" for="email">{{i18n "email"}}</label>
                <input class="form-control shadow-none" type="email" name="email_address" id="email" 
                  pattern="[a-z0-9.]+@[a-z]+\.[a-z]{2,3}"
                  required 
                  autocomplete="email" 
                  placeholder={{ i18n "email" }}
                  aria-errormessage="invalid-feedback-email">
                <div class="invalid-feedback" id="invalid-feedback-email"> {{ i18n "email"}} {{ i18n "invalid_required"}} </div>
              </div>

              <div class="form-group mb-3">
                <label class="mb-1" for="cv">{{i18n `upload_cv`}} </label>
                <input
                  class="text-dark my-1 w-100 form-control"
                  type="file"
                  accept=".doc, .docx, .pdf, application/msword"
                  name="cv"
                  id="cv"
                  required
                  aria-errormessage="invalid-feedback-cv">
                 <div class="invalid-feedback" id="invalid-feedback-cv"> {{ i18n "invalid_required"}} </div>
              </div>

              <button
                class="btn btn-sm btn-primary"
                type="submit"
                aria-label="{{i18n `apply_now`}}"
              >
                {{i18n `apply_now`}}
              </button>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
     

    <ul class="row mt-5 p-0 column-gap-3" style="list-style-type: none;">
      <h2 class="mb-3">{{i18n `other_jobs`}}</h2>
        {{ $currentPage := . }} 
        {{ $pages := where site.RegularPages "Section"
        "career" }} 
        {{ $count := 0 }} {{ range $pages}} {{ if and (ne .Permalink
        $currentPage.Permalink) (lt $count 4) }}

        {{ $button := dict
          "enable" true
          "type" "link-stretched"
          "label" "Read case study"
          "link" .RelPermalink
        }}
        {{ $content := printf "%s | %s" .Params.job_nature .Params.category }}
        {{ $card := dict
          "name" .Title 
          "headingLevel" "3"
          "cardMarkup" "li"
          "button" $button
          "content" $content
        }}
        {{ partial "card" $card }}
        {{ $count = add $count 1 }} {{ end }} {{ end }}
     
        <div class="text-center mt-4">
          <a href="/careers#jobs"> {{i18n `view_all_positions`}} </a>
        </div>
      </ul>
  </div>
</section>

{{end}}
